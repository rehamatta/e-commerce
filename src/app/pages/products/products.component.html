<section class="p-6">
  <div class="grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3">
    @for (product of products; track product.id) {

    <div
      class="overflow-hidden cursor-pointer hover:shadow-md hover:shadow-green-300 transition card w-full max-w-sm bg-white border border-gray-300 rounded-lg shadow-sm"
    >
      <div class="px-5 pb-5">
        <div class="relative">
          <a>
            <img
              [routerLink]="['/details', product.id]"
              class="rounded-t-lg w-full h-[200px] object-contain"
              [src]="product.imageCover"
              [alt]="product.title"
            />
          </a>
          <button
            (click)="addItemToWishlist(product.id)"
            class="absolute top-0 right-0 block ms-auto px-2 rounded-lg mt-3"
          >
            <i
              #el
              (click)="toggleHeart($index)"
              class="fa-solid fa-heart text-gray-500 text-xl hover:text-red-700 transition-all"
            ></i>
          </button>

          <div class="btn flex items-center justify-between px-5 pb-5 mt-5">
            <a
              (click)="addToCart(product.id)"
              role="button"
              class="absolute bottom-0 right-0 text-center text-white py-0.5 px-2 rounded-lg"
            >
              <i
                class="fas fa-cart-shopping text-gray-400 text-xl hover:shadow-lg hover:border-2 hover:border-gray-200 p-2 rounded-md transition-all"
              ></i>
            </a>
          </div>
        </div>
        <p class="text-green-600 text-sm px-5">{{ product.category.name }}</p>

        <h2 class="text-xl font-medium tracking-tight text-gray-700">
          {{ product.title.split(" ", 2).join(" ") }}
        </h2>
        <a>
          <p
            class="text-sm font-normal tracking-tight text-gray-700 hover:text-yellow-600"
          >
            {{ product.description.split(" ", 5).join(" ") }}
          </p>
        </a>

        <p class="text-gray-900 text-xl py-2 font-medium">
          {{ product.price | currency : "GBP" }}
        </p>
        <div class="flex items-center justify-between mt-2.5 mb-5">
          <div class="flex items-center space-x-1 rtl:space-x-reverse">
            <div class="stars">
              @for (star of stars; track $index) {
              <span
                (click)="rateProduct($index + 1)"
                class="{{
                  $index < product.ratingsAverage ? 'filled-star' : 'empty-star'
                }}"
              >
                â˜…
              </span>
              }
            </div>
          </div>
          <span
            class="bg-blue-100 text-blue-800 text-xs font-semibold px-2.5 py-0.5 rounded-sm dark:bg-blue-200 dark:text-blue-800 ms-3"
            >{{ product.ratingsAverage }}</span
          >
        </div>
      </div>
    </div>

    }
  </div>
</section>
